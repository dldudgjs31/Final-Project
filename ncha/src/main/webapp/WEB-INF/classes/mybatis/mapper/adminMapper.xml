<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">
	<select id="categorySalesSection" resultType="com.sp.app.admin.chart.Analysis">
		WITH categorySales AS(
			SELECT pod.orderNum, total_sales, categoryName
			FROM product_order_detail pod
			LEFT OUTER JOIN store_order_list sol ON pod.orderNum = sol.orderNum
		)
	<![CDATA[
		SELECT '의류' section, NVL(SUM(total_sales),0) total  FROM categorySales WHERE categoryName = '의류'
		UNION ALL
		SELECT '전자제품' section, NVL(SUM(total_sales),0) total FROM categorySales WHERE categoryName = '전자제품'
		UNION ALL
		SELECT '생필품' section, NVL(SUM(total_sales),0) total FROM categorySales WHERE categoryName = '생필품'
		UNION ALL
		SELECT '인테리어 가구' section, NVL(SUM(total_sales),0) total FROM categorySales WHERE categoryName = '인테리어가구'
	]]>
	</select>
	
	
</mapper>